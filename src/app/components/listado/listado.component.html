<section class="section query-module">
    <h2 class="slide-in-right">Simulaci贸n: Listado y Consulta de Ganado (ABMC) </h2>
    <p class="subtitle">Tabla de visualizaci贸n de los registros activos en el sistema. Simula las funcionalidades de Consulta (C), Modificaci贸n (M) y Baja (B).</p>

    <div class="search-container slide-in-up">
        <input 
            type="text" 
            class="search-input" 
            placeholder=" Buscar por caravana, raza o estado..."
            [(ngModel)]="terminoBusqueda"
            (input)="filtrarAnimales()">
        <button class="btn-clear-search" (click)="limpiarBusqueda()">Limpiar</button>
    </div>

    <div class="table-container slide-in-up">
        <table class="animal-table">
            <thead>
                <tr>
                    <th>N掳 Caravana</th>
                    <th>Raza</th>
                    <th>Fecha Nac.</th>
                    <th>Peso (kg)</th>
                    <th>Estado Sanitario</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let animal of animalesFiltrados" [attr.data-label]="'Caravana: ' + animal.caravana">
                    <td data-label="Caravana">{{ animal.caravana }}</td>
                    <td data-label="Raza">{{ animal.raza }}</td>
                    <td data-label="Fecha Nac.">{{ animal.fechaNacimiento | date: 'dd/MM/yyyy' }}</td>
                    <td data-label="Peso (kg)">{{ animal.peso }}</td>
                    <td data-label="Estado">{{ animal.estado }}</td>
                    <td data-label="Acciones">
                        <button class="btn-action modify" (click)="modificar(animal)">Modificar</button>
                        <button class="btn-action delete" (click)="eliminar(animal.caravana)">Baja</button>
                    </td>
                </tr>
                
                <!-- Mensaje cuando la lista est谩 vac铆a -->
                <tr *ngIf="animalesFiltrados.length === 0">
                    <td colspan="6" class="text-center empty-row">
                        <p style="font-size: 1.2em; margin-bottom: 10px;">No se encontraron animales registrados.</p>
                        <a routerLink="/registro" style="color: var(--color-secondary); text-decoration: none; font-weight: bold;">Registrar primer animal</a>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
    <div class="info-box slide-in-up">
        <p> <strong>ABMC:</strong> Esta tabla simula las funciones de Consulta (C) y permite las acciones de Modificar (M) y Baja (B) de los registros.</p>
        <p> <strong>Tip:</strong> Puedes buscar animales usando el campo de b煤squeda arriba. Para registrar un nuevo animal, ve a la secci贸n de <a routerLink="/registro">Registro</a>.</p>
    </div>
</section>
